Map-Fu - SETUP
--------------

**Read the HISTORY file for a list of the latest features**

ASSUMPTIONS MADE BY THIS SETUP DOCUMENTATION

- You already have a mapserver environment setup including the
  software described in the README file.

- The top level directory containing this code is named map-fu.
  Ultimately you will probably want to change it.

- Sample data is already provided under data/vector.  To add your own
  data simply define a new datasource (see below for what that is) and
  set that datasource to be used in the config file (see below for
  what that is)

  Setup is as follows:

1. CREATE A NEW CONFIGURATION FOR THE APPLICATION

- Make a copy of the main configuration template config.tmpl.php
  located in the map-fu directory, name it config.php: 

  `cp config.tmpl.php config.php`

  Multiple files in map-fu look for config.php so be sure and name it
  that.

2. SETUP YOUR MAP IMAGES DIRECTORY

- The sample/images directory needs to be writeable by the
  webserver group. This is necessary for the webserver to be able to
  write images generated by mapserver to the images directory.
  Assuming your webserver is in group 'www':

  `chgrp www sample/images/`

  Note, if you don't have the necessary privileges to do this you can
  make the sample/images directory world-writeable instead. The
  directory is only used as temporary storage space so it is not a
  large issue although anyone with access to the system can write to
  the directory. From the map-fu directory:

  `chmod 777 sample/images`

3. TEST THE MAP INTERFACE

   Browse to http://www.your-server.com/map-fu

   If it doesn't work then chances are you either didn't follow the
   directions correctly (in which case the error message you receive
   is hopefully explanatory) or your issue is with any one of the other
   pieces of software that make this application possible.  Note that
   this documentation is always evolving and may not cover possible
   issues.  A user and dev mailing list is available if you have further
   questions.  Be descriptive and provide sufficient information
   outlining your problem and you should receive a response.

GENERAL SETUP WITH YOUR OWN DATA
-------------

1. PLACE YOUR MAPFILES

When your ready to display your own data (and not just testing with
the sample data):

- place your mapfiles in the map/ directory (the default location for
  mapfiles).  Really, you may place them wherever you like but make
  sure that you update the path in the config file (step 3). If you
  don't know what a mapfile is then you need to learn how to use
  mapserver.

- Place your data files (vector/raster), if any, wherever you like.
  Make sure that your mapfiles are defined to look in the appropriate
  directory for them.

- Fonts are available in data/fonts.  You can reference them from your
  mapfiles.  Add more if you wish.  Mapserver should provide some also.

3. CREATE A NEW CONFIGURATION

- Make a copy of the main configuration template config.tmpl.php
  located in the map-fu directory, name it config.php:

  `cp config.tmpl.php config.php`

  Multiple files in map-fu look for config.php so be sure and name it
  that.

- Edit config.php

  - Verify $map_path="map/" if that is where you placed your mapfiles.
  Otherwise, set it to the appropriate location.  

2. CREATE A NEW DATASOURCE

- Make a copy of the sample template located at
  includes/DataSources/SampleDatasource and name it something
  descriptive to what it defines, for example
  OregonRiverDatasource.php.  Keep in mind, a datasource can define
  multiple mapfiles.

- Edit OregonRiverDatasource.php (or whatever you named the datasource)

  - Change the name of the PHP class to match the name of the file.
    It would read as follows:

  class OregonRiverDatasource extends Component {   

- Edit config.php again

  - Set $datasource="OregonRiverDatasource" the name of the
  datasource you defined previously.

  - Edit the $mapfiles array.  Use the sample settings
  as a guide.  The array is used to define the title and filename of
  each mapfile you want to make available to the user.

  public $mapfiles=array("Columbia River"=>"oregon_columbia.map",
  "Willamette River"=>"willamette_river.map");

  - Set the default map to display for this datasource.  It should match one of the titles in the mapfiles array:

  public $defaultMap="Columbia River";

  * Note, if you have only one map file and it is to be used by
    default, you can get rid of the Data Source panel in the
    application window by setting the datasource object's showTab
    property to false.

4. SETUP YOUR MAP IMAGES DIRECTORY

- The map-fu/map/images directory needs to be writeable by the
  webserver group. This is necessary for the webserver to be able to
  write images generated by mapserver to the images directory.
  From the map-fu directory, assuming your webserver is in group 'www':

  `chgrp www map/images/`

  Note, if you don't have the necessary privileges to do this you can
  make the map/images directory world-writeable instead. The
  directory is only used as temporary storage space so it is not a
  large issue although anyone with access to the system can write to
  the directory. From the map-fu directory:

  `chmod 777 map/images`

5. TEST THE MAP INTERFACE

   Browse to http://www.your-server.com/map-fu

   If it doesn't work then chances are you either didn't follow the
   directions correctly (in which case the error message you receive
   is hopefully explanatory enough) or your issue is with any one of
   the other pieces of software that make this application possible.
   Note that this documentation is always evolving and may not cover
   possible issues.  A user and dev mailing list is available if you
   have further questions.  Be descriptive and provide sufficient
   information outlining your problem and you should receive a
   response.

6. SETUP TOOLS

   Most map tools are set to display by default.  To change the tools
   that are displayed, simply edit the tools array found in
   config.php.  The default tool to use can also be
   changed by setting the default_tool variable.

   PHP Source code for tools is located in the includes/Tools
   directory.  Additional supporting Javascript code may be available
   for a tool in the includes/Javascript directory.

   See the tools array comment block for information on where the tools
   source files are located and the naming convention used to reference them.

   If a tool you are looking for is not available, please consider
   developing and contributing it!

5. CUSTOMIZE INDIVIDUAL TOOLS

   Tools can be customized to your hearts content.  For information on
   how to customize a specific tool check the Developer's Manual or go
   straight to the source for the given tool.

6. GEOCODER

   a google geocoder abstraction is provided which allows map-fu to
   easily be used with the google maps API which provides free
   geocoding services up to 50,000 requests a day.  Simply define
   $use_google_geocoder = true in config.php and add your google maps
   API key to $google_maps_url defined in config.php.  Look for "YOUR
   KEY HERE".  If you don't have a key you need to go get one at
   http://www.google.com/apis/maps/signup.html.  Keep in mind we're
   not using the google mapping services, just the geocoding services.

   Geocoding should now magically work.  The ZoomTo tool is setup to
   make use of this by default.  Simply click ZoomTo and type in an
   address.  If there is a result then you can optionally zoom to it.
   If there are multiple results then you can choose from them in a
   popup list as well.

   This extension is missing some things.

DEVELOPER'S MANUAL 
------------------

A developer's manual is gradually being developed.  It is available at:

http://www.arc.pdx.edu/map-fu-wiki/index.php/Devmanual

------------------------------------------------------------------------
$Id: SETUP 107 2007-02-17 18:57:22Z tim_j_welch $
$URL: https://svn.sourceforge.net/svnroot/map-fu/trunk/SETUP $